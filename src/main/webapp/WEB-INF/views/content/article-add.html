<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="icon" href="/favicon.ico">
<title>添加文章</title>
</head>
<body>
	<div class="container">
		<form role="form" id="form-article-add">
		<br><br>
			<div class="form-group">
				<label for="contentName">文章标题：</label> <input type="text" class="form-control" value="" placeholder="" id="contentName" name="contentName">
			</div>
			<div class="form-group">
				<label>文章类型：</label> <select name="contentType" id = "contentType2" class="form-control">
				</select>
			</div>
			<div class="form-group">
				<label>文章摘要：</label>
					<textarea name="summary" id="summary" placeholder="说点什么..." class="form-control" rows="3"></textarea>
			</div>
			<div class="form-group">
				<label>文章内容：</label>
				<script id="editor" type="text/plain" style="width: 100%; height: 400px;"></script>
			</div>
			<div class="form-group">

				<!-- <button onClick="article_save_submit();" class="btn btn-primary radius" type="submit"><i class="Hui-iconfont">&#xe632;</i> 保存并提交审核</button>
				<button onClick="article_save();" class="btn btn-secondary radius" type="button"><i class="Hui-iconfont">&#xe632;</i> 保存草稿</button>
				<button onClick="removeIframe();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button> -->
				<button onClick="article_save_submit();" class="btn btn-primary" type="button">发布</button>

			</div>
		</form>
	</div>
	<!-- <script type="text/javascript"
		src="/resource/lib/ueditor/1.4.3/ueditor.config.js"></script>
	<script type="text/javascript" src="/resource/lib/ueditor/1.4.3/ueditor.all.min.js">
		
	</script>
	<script type="text/javascript" src="/resource/lib/ueditor/1.4.3/lang/zh-cn/zh-cn.js"></script> -->
	<script type="text/javascript">
		$(function(){
			$.ajax({
				type : "POST",
				dataType : "json",
				url : "/list/type",
				data : "",
				contentType : "application/x-www-form-urlencoded",
				success : function(result) {
					for (var i = 0; i < result.length; i++) {
						$("#contentType2").append('<option value="'+result[i].contentType+'">' + result[i].typeName + '</option>');
					}
					//$("contentType");
				},
				error : function(data) {
					alert("error:" + data.responseText);
				}
			});
		});
		function article_save_submit() {
			$.ajax({
				type : "GET",
				dataType : "json",
				url : "/add",
				data : $('#form-article-add').serialize(),
				contentType : "application/x-www-form-urlencoded",
				success : function(result) {
					alert('发表结果：' + result.result, 3000);
					$("#contentName").val("");
					$("#contentType2").val("0");
					$("#summary").val("");
					var ue = UE.getEditor('editor');
					ue.setContent("");
				},
				error : function(data) {
					alert("error:" + data.responseText);
				}
			});
			//document.getElementById("form-article-add").submit();
		}

		$(function() {
			var ue = UE.getEditor('editor');

		});
	</script>
</body>
</html>